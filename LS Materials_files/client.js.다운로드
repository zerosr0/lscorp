var menu1=new Array();
var menu1Count=0;
var menu1Text;
var menu2=new Array();
var menu2Count=0;
var menu2Text;
var url=new Array();
url=location.href.split("/");
var urlLang=url[3];
var urlMenu1=url[4];
var urlMenu2=url[5];
var urlMenu3="";
var width_now=$(window).width();
var modalClass;
var layerClass="";

if(url[5].indexOf("?") > 0)
{
	urlMenu2=url[5].substr(0,url[5].indexOf("?"));
	urlMenu3=url[5].substr(url[5].indexOf("?")+1,url[5].length);
}
console.log(urlMenu3);
$(document).ready(function(){
	$('.drop-down-cl').on("click",function(){
		$(this).parent().find(".down").slideToggle();//toggleClass("active");
	});
	

	$('.drop-up-cl').on("click",function(){
		$(this).parent().find(".up").css("bottom",$(this).parent("div").height()+"px");
		$(this).parent().find(".up").slideToggle();//toggleClass("active");
	});
	
	
	$('.menu-cl').each(function(idx){
		
		$(this).find("a").each(function(idx2){
			if(idx2 == 0)
			{
				menu1[menu1Count++]="<li><a href='"+$(this).attr("href")+"'>"+$(this).html()+"</a></li>";
				
				if($(this).attr("href").indexOf(urlMenu1) > 0)
				{
					menu1Text=$(this).html();
				}
			}else{
				
				if($(this).attr("href").indexOf(urlMenu1) > 0)
				{
					if($(this).html().indexOf("<img") >= 0)
					{
						menu2[menu2Count++]="<li><a href='"+$(this).attr("href")+"'>"+$(this).find("img").attr("alt")+"</a></li>";
					}else{
						menu2[menu2Count++]="<li><a href='"+$(this).attr("href")+"'>"+$(this).html()+"</a></li>";
					}
					
					if($(this).attr("href").indexOf(urlMenu2) > 0)
					{
						if($(this).html().indexOf("<img") >= 0)
						{
							menu2Text=$(this).find("img").attr("alt");
						}else{
							menu2Text=$(this).html();
						}
					}
				}
				
				
				
				
			}
		});
	});
	
	if($('#sub_menu_1'))
	{
		if(urlMenu2 == "cell_busba.html")
		{
			menu2Text="셀";
		}else if(urlMenu2 == "module_busbar.html")
		{
			menu2Text="모듈";
		}else if(urlMenu2 == "module_ctc.html")
		{
			menu2Text="모듈";
		}else if(urlMenu2 == "uc_features.html")
		{
			menu2Text="울트라커패시터 소개";
		}else if(urlMenu2 == "uc_good_to_use.html")
		{
			menu2Text="울트라커패시터 소개";
		}else if(urlMenu2 == "application_energy.html")
		{
			menu2Text="응용제품";
		}else if(urlMenu2 == "application_transportation.html")
		{
			menu2Text="응용제품";
		}else if(urlMenu2 == "application_automotive.html")
		{
			menu2Text="응용제품";
		}else if(urlMenu2 == "application_etc.html")
		{
			menu2Text="응용제품";
		}else if(urlMenu2 == "technical_info_view.html")
		{
			menu2Text="기술지원";
		}else if(urlMenu2 == "certificate_view.html")
		{
			menu2Text="인증서";
		}else if(urlMenu2 == "documents_download_view.html")
		{
			menu2Text="Documents Download";
		}else if(urlMenu2 == "news_view.html")
		{
			menu2Text="뉴스";
		}else if(urlMenu2 == "ls_materials_history.html")
		{
			menu2Text="LS머트리얼즈";
		}else if(urlMenu2 == "ls_materials_network.html")
		{
			menu2Text="LS머트리얼즈";
		}
		
		if(urlMenu3.indexOf("type=financial") >= 0)
		{
			menu2Text="재무정보";
		}else if(urlMenu3.indexOf("type=ir") >=0)
		{
			menu2Text="IR행사";
		}else if(urlMenu3.indexOf("type=disclosures") >=0)
		{
			menu2Text="공시";
		}else if(urlMenu3.indexOf("type=announcement") >=0)
		{
			menu2Text="전자공고";
		}
		
		
		$('#sub_menu_1').html(menu1.join(" "));
		$('#sub_menu_1').parent().find(".sub-menu-on").html(menu1Text);
		$('#sub_menu_2').html(menu2.join(" "));
		$('#sub_menu_2').parent().find(".sub-menu-on").html(menu2Text);
	}
	
	$('.sub-menu-on').on("click",function(){
		$(".sub-menu-show").slideUp();
		$(this).parent().find(".sub-menu-show").css("top",$('.sub-menu').height()+"px");
		if($(this).parent().find(".sub-menu-show").css("display") == "none")
		{
			$(this).parent().find(".sub-menu-show").slideDown();
		}

	});
	
	$('.sns-cl').on("click",function(){
		$('.usr-sns').toggle();
	});
	
	$('.sns-close').on("click",function(){
		$('.usr-sns').hide();
	});
	
	$(".icheck").iCheck({
		checkboxClass: 'icheckbox_square-red',
         radioClass: 'iradio_square-red'	
		
	});
	
	$('.layer-show').on("click",function(){
		var content;
		modalClass="black";
		layerClass="";
		
		$("html").removeClass("open");
		$("body").css("overflow","auto");
		$("body").css("position","static");
		
		console.log("1");
		
		if($(this).attr("data_modal_class").length > 0)
		{
			modalClass=$(this).attr("data_modal_class");
		}
		
		if($(this).attr("data_layer_class").length > 0)
		{
			layerClass=$(this).attr("data_layer_class");
		}
		
		modal_show(modalClass);
		
		if(!$('.layer-modal-window').hasClass(layerClass))
		{
			$('.layer-modal-window').addClass(layerClass);
		}
		
		
		if($(this).attr("data_image"))
		{
			content="<img src='"+$(this).attr("data_image")+"'>";
			
	
			var aathumimg= new Image();
			aathumimg.src = $(this).attr("data_image");
			aathumimg.onload=function()
			{
				var imgW = aathumimg.width;
				var imgH = aathumimg.height;
				
				$('.modal-cont').html(content);
				if(imgW > width_now)
				{
					$('.layer-modal-window').css("width","95%");
					$('.layer-modal-window').css("height","auto");
					
				}else{
					$('.layer-modal-window').css("width",imgW+"px");
					$('.layer-modal-window').css("height",(imgH+30)+"px");
					$('.layer-modal-window').css("overflow","hidden");
				}
				$('.layer-modal-window').show();
			}

		}else if($(this).attr("data_content"))
		{
			content=$('#'+$(this).attr("data_content")).html();
			
			$('.modal-cont').html(content);
			if($(this).attr("data_width"))
			{
				$('.layer-modal-window').css("width",$(this).attr("data_width"));
				$('.layer-modal-window').css("height","auto");
			}else{
				$('.layer-modal-window').css("width","none");
			}
			if($(this).attr("data_title"))
			{
				//$("input[name='hide_title']").val(" "+$(this).attr("data_title"));
			}
			if($(this).attr("data_url"))
			{
				$("input[name='hide_url']").val(location.href);
			}
			$('.layer-modal-window').attr("style","display: block; overflow: hidden;");
			$('.layer-modal-window').show();
			
		}
		
		
		
	});
	
	$(document).on("click",".layer-close",function(){
		modal_hide(modalClass);
		
		$('.layer-modal-window').removeClass(layerClass);
		$('.layer-modal-window').hide();
		
	});
	
	$(document).on("click","[data_href]",function(){
		if($(this).attr("data_target"))
		{
			window.open('about:blank').
			location.href=$(this).attr("data_href");
		}else{
			location.href=$(this).attr("data_href");
		}
	});
	
	$('.text-copy').on("click",function(){
		$('#copy_text').val(location.href);
		textCopy('copy_text');
	});
});

$(window).scroll(function () {

	
	var stop=$( window ).scrollTop();
	if($('.sub-menu').length > 0)
	{
		
		var top2=$('.sub-menu').offset().top;
		if(stop < 300)
		{
			if($('.sub-menu').css("position") == "fixed")
			{	
				$('.sub-menu').css("position","static");
			}
    
		}else if(stop >= top2)
		{

			if($('.sub-menu').css("position") == "static")
			{
				$('.sub-menu').css("top",0);
				$('.sub-menu').css("width","100%");
				$('.sub-menu').css("position","fixed");

			}
		}
   
	}
	
	if($('.usr-quick-1').length > 0)
	{
		if(stop > parseInt($(window).height()/3))
		{
			$('.usr-quick-1').addClass("on");
		}else{
			$('.usr-quick-1').removeClass("on");
		}
	}
});



/* layer 함수 */
function modal_show(adClass)
{
    var sheight=$( document ).height();
    $('.layer-modal').css("height",sheight);
	$('.layer-modal').addClass(adClass);
    $('.layer-modal').show();
	
	if(width_now < 1100)
	{
		$("body").css("overflow","hidden");
		$("body").css("position","relative");
	}
	$('body').on('scroll touchmove mousewheel', function(event) {
		event.preventDefault();
		event.stopPropagation();
		return false;
	});
}

function modal_hide(adClass)
{
	$('.layer-modal').removeClass(adClass);
    $('.layer-modal').hide();
    $("body").css("overflow","auto");
	$("body").css("position","static");
	$('body').off('scroll touchmove mousewheel');
}


/* sns */
function sns_facebook(url,title){
  window.open("http://www.facebook.com/sharer/sharer.php?u="+url,"facebook","width=550,height=500,scrolls=no").focus();
}


function sns_twitter(url,title){

	var s_url = "http://twitter.com/share?url=" + url + "&text=" + encodeURIComponent(title);
    window.open(s_url, "twitter", "width=550,height=500").focus();
}


function sns_google(url,title){

  window.open("https://plus.google.com/share?url="+url,"googleplus","width=520,height=520,scrolls=no").focus();
}

function sns_linked(url,title){

  window.open("https://www.linkedin.com/shareArticle?mini=true&url="+url,"linkedIn","width=540,height=520,scrolls=no").focus();
}

function sns_blog(url,title)
{
  window.open("http://share.naver.com/web/shareView.nhn?url="+url+"&title="+title,"naverblog","width=540,height=520,scrolls=no").focus();
}

function sns_band(url,title)
{
  window.open("http://www.band.us/plugin/share?body="+title+"&route="+url,"naverband","width=540,height=520,scrolls=no").focus();
}

function sns_email(url,title){
     var left=parseInt(width_now/2-310);
    $("input[name='hide_title']").val(" "+title);
    $("input[name='hide_url']").val(url);
   
	modal_show("black");
	$('#email_pop').show();
	
}

function contentPrint()
{
    window.print();
}


function sns_email_send(f)
{
   
    if(f.hide_title.value == "")
    {
        alert('공유한 페이지를 입력해주세요');
        return false;
    }
    
    if(!email_check(f.hide_to.value))
    {
        alert('받는분을 입력해주세요');
        return false;
    }
    


    if(f.hide_cont.value == "")
    {
        alert('메시지를 입력해주세요');
        return false;
    }
    
    if(f.hide_from.value == "")
    {
        alert('보내는분을  입력해주세요');
        return false;
    }
    
     if(!email_check(f.hide_femail.value))
    {
        alert('보내는분 이메일을  입력해주세요');
        return false;
    }
    
    f.submit();
}


function textCopy(id) {
  /* Get the text field */
  var copyText = document.getElementById(id);

  /* Select the text field */
  copyText.select();
  copyText.setSelectionRange(0, 99999); /*For mobile devices*/

  /* Copy the text inside the text field */
  document.execCommand("copy");

  /* Alert the copied text */
  alert("Copied.");
  
}